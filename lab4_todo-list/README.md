# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ4: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º

---

## üéØ –¢–µ–º–∞
–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º –≤ PHP

---

## üìù –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–¶–µ–ª—å –¥–∞–Ω–Ω–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã ‚Äî –æ—Å–≤–æ–∏—Ç—å –∫–ª—é—á–µ–≤—ã–µ –∞—Å–ø–µ–∫—Ç—ã —Ä–∞–±–æ—Ç—ã —Å HTML-—Ñ–æ—Ä–º–∞–º–∏ –≤ PHP, –≤–∫–ª—é—á–∞—è –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫—É –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é. –í —Ä–∞–º–∫–∞—Ö —Ä–∞–±–æ—Ç—ã —è:

- –ù–∞—É—á–∏–ª—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å HTML-—Ñ–æ—Ä–º—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PHP.
- –û—Å–≤–æ–∏–ª —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏.
- –†–µ–∞–ª–∏–∑–æ–≤–∞–ª —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ (ToDo-–ª–∏—Å—Ç) —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª.
- –ó–∞–∫—Ä–µ–ø–∏–ª –Ω–∞–≤—ã–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

–≠—Ç–∞ —Ä–∞–±–æ—Ç–∞ —Å—Ç–∞–Ω–µ—Ç –æ—Å–Ω–æ–≤–æ–π –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏–∑—É—á–µ–Ω–∏—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –±—É–¥–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –≤ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏—è—Ö.

---

## üìö –£—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã

### –ó–∞–¥–∞–Ω–∏–µ 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- –°–æ–∑–¥–∞—Ç—å –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞ `lab4_lab4_todo-list`.
- –û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏—á–Ω—É—é —Ñ–∞–π–ª–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
  ```
  lab4_todo-list/
  ‚îú‚îÄ‚îÄ public/
  ‚îÇ   ‚îú‚îÄ‚îÄ index.php                   # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–≤—ã–≤–æ–¥ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–¥–∞—á)
  ‚îÇ   ‚îî‚îÄ‚îÄ task/
  ‚îÇ       ‚îú‚îÄ‚îÄ create.php              # –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
  ‚îÇ       ‚îî‚îÄ‚îÄ index.php               # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –≤—Å–µ—Ö –∑–∞–¥–∞—á
  ‚îú‚îÄ‚îÄ src/
  ‚îÇ   ‚îú‚îÄ‚îÄ handlers/                   # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ–æ—Ä–º
  ‚îÇ   ‚îî‚îÄ‚îÄ helpers.php                 # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
  ‚îú‚îÄ‚îÄ storage/
  ‚îÇ   ‚îî‚îÄ‚îÄ tasks.txt                   # –§–∞–π–ª –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
  ‚îî‚îÄ‚îÄ README.md                       # –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
  ```

### –ó–∞–¥–∞–Ω–∏–µ 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å HTML-—Ñ–æ—Ä–º—É –≤ —Ñ–∞–π–ª–µ `public/task/create.php` —Å –ø–æ–ª—è–º–∏:
  - –ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ (`<input type="text">`)
  - –î–µ–¥–ª–∞–π–Ω (`<input type="date">`)
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç (`<select>`)
  - –û–ø–∏—Å–∞–Ω–∏–µ (`<textarea>`)
  - –¢—ç–≥–∏ (`<select multiple>`)
  - –®–∞–≥–∏ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ JavaScript)
- –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–û—Ç–ø—Ä–∞–≤–∏—Ç—å" –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

### –ó–∞–¥–∞–Ω–∏–µ 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã
- –°–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤ `src/handlers/create_task_handler.php`, –∫–æ—Ç–æ—Ä—ã–π:
  - –§–∏–ª—å—Ç—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π PHP.
  - –ü—Ä–æ–≤–æ–¥–∏—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
  - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª `storage/tasks.txt` –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.
- –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø–æ–ª—è–º–∏ —Ñ–æ—Ä–º—ã.
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É.

### –ó–∞–¥–∞–Ω–∏–µ 4. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–¥–∞—á
- –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ (`public/index.php`) –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å 2 –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–¥–∞—á–∏.
- –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `public/task/index.php` –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ –∑–∞–¥–∞—á–∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (–ø–æ 5 –∑–∞–¥–∞—á –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É).

---

## –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã

### –ó–∞–¥–∞–Ω–∏–µ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

#### –®–∞–≥ 1.1: –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **–ß—Ç–æ —è —Å–¥–µ–ª–∞–ª:**  
  –°–æ–∑–¥–∞–ª –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `lab4_todo-list` –∏ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–ª —Ñ–∞–π–ª–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –≤ —É—Å–ª–æ–≤–∏—è—Ö.
- **–ó–∞—á–µ–º:**  
  –ß–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–ø—Ä–æ—â–∞–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—é –ø–æ –ø—Ä–æ–µ–∫—Ç—É –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–¥–∞ –≤ –±—É–¥—É—â–µ–º.
- **–ö–∞–∫:**  
  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
  ```bash
  mkdir -p lab4_todo-list/{public/task,src/handlers,storage}
  touch lab4_todo-list/public/index.php lab4_todo-list/public/task/create.php lab4_todo-list/public/task/index.php
  touch lab4_todo-list/src/helpers.php lab4_todo-list/src/handlers/create_task_handler.php
  touch lab4_todo-list/storage/tasks.txt lab4_todo-list/README.md
  ```

#### –®–∞–≥ 1.2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–ß—Ç–æ —è —Å–¥–µ–ª–∞–ª:**  
  –£–±–µ–¥–∏–ª—Å—è, —á—Ç–æ PHP –≤–µ—Ä—Å–∏–∏ 8+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –∏ –∑–∞–ø—É—Å—Ç–∏–ª –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
- **–ö–∞–∫:**  
  –ü—Ä–æ–≤–µ—Ä–∏–ª –≤–µ—Ä—Å–∏—é PHP –∫–æ–º–∞–Ω–¥–æ–π `php -v` –∏ –∑–∞–ø—É—Å—Ç–∏–ª —Å–µ—Ä–≤–µ—Ä:
  ```bash
  cd lab4_lab4_todo-list
  php -S localhost:8080
  ```

---

### –ó–∞–¥–∞–Ω–∏–µ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏

#### –®–∞–≥ 2.1: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ HTML-—Ñ–æ—Ä–º—ã
- **–ß—Ç–æ —è —Å–¥–µ–ª–∞–ª:**  
  –í —Ñ–∞–π–ª–µ `public/task/create.php` —Å–æ–∑–¥–∞–ª —Ñ–æ—Ä–º—É —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –ø–æ–ª—è–º–∏.
- **–ö–∞–∫:**  
  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª HTML-—Ç–µ–≥–∏ `<form>`, `<input>`, `<select>` –∏ `<textarea>`, –¥–æ–±–∞–≤–∏–≤ —Å—Ç–∏–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞.
- **–ö–æ–¥ —Ñ–æ—Ä–º—ã:**
  ```html
  <form action="../../src/handlers/create_task_handler.php" method="POST">
      <label for="title">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:</label>
      <input type="text" id="title" name="title" required>
      
      <label for="due_date">–î–µ–¥–ª–∞–π–Ω:</label>
      <input type="date" id="due_date" name="due_date" required>
      
      <label for="priority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</label>
      <select id="priority" name="priority" required>
          <option value="low">–ù–∏–∑–∫–∏–π</option>
          <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
          <option value="high">–í—ã—Å–æ–∫–∏–π</option>
      </select>
      
      <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
      <textarea id="description" name="description" rows="4"></textarea>
      
      <label for="tags">–¢—ç–≥–∏:</label>
      <select id="tags" name="tags[]" multiple>
          <option value="work">–†–∞–±–æ—Ç–∞</option>
          <option value="personal">–õ–∏—á–Ω–æ–µ</option>
          <option value="urgent">–°—Ä–æ—á–Ω–æ</option>
      </select>
      
      <label>–®–∞–≥–∏:</label>
      <div id="steps-container"></div>
      <button type="button" onclick="addStep()">–î–æ–±–∞–≤–∏—Ç—å —à–∞–≥</button>
      
      <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </form>
  ```

#### –®–∞–≥ 2.2: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —à–∞–≥–æ–≤
- **–ß—Ç–æ —è —Å–¥–µ–ª–∞–ª:**  
  –†–µ–∞–ª–∏–∑–æ–≤–∞–ª –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –¥–ª—è —à–∞–≥–æ–≤ —Å –ø–æ–º–æ—â—å—é JavaScript.
- **–ö–∞–∫:**  
  –î–æ–±–∞–≤–∏–ª —Ñ—É–Ω–∫—Ü–∏—é `addStep()`, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ –ø–æ–ª—è `<input>` –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏.
- **–ö–æ–¥ JavaScript:**
  ```javascript
  function addStep() {
      const container = document.getElementById('steps-container');
      const newInput = document.createElement('input');
      newInput.type = 'text';
      newInput.name = 'steps[]';
      newInput.placeholder = '–í–≤–µ–¥–∏—Ç–µ —à–∞–≥';
      container.appendChild(newInput);
  }
  ```

---

### –ó–∞–¥–∞–Ω–∏–µ 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã

#### –®–∞–≥ 3.1: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–ß—Ç–æ —è —Å–¥–µ–ª–∞–ª:**  
  –í —Ñ–∞–π–ª–µ `src/handlers/create_task_handler.php` –Ω–∞—Å—Ç—Ä–æ–∏–ª —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã.
- **–ö–∞–∫:**  
  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `filter_input_array` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –ø—É—Å—Ç—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è.
- **–ö–æ–¥:**
  ```php
  $filters = [
      'title' => FILTER_SANITIZE_STRING,
      'due_date' => FILTER_SANITIZE_STRING,
      'priority' => FILTER_SANITIZE_STRING,
      'description' => FILTER_SANITIZE_STRING,
  ];
  $filteredInput = filter_input_array(INPUT_POST, $filters);
  $tags = isset($_POST['tags']) ? (array)$_POST['tags'] : [];
  $steps = isset($_POST['steps']) ? (array)$_POST['steps'] : [];
  $errors = [];

  if (empty($filteredInput['title'])) {
      $errors['title'] = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏.';
  }
  if (empty($filteredInput['due_date'])) {
      $errors['due_date'] = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –¥–µ–¥–ª–∞–π–Ω.';
  }
  ```

#### –®–∞–≥ 3.2: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **–ß—Ç–æ —è —Å–¥–µ–ª–∞–ª:**  
  –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–∏–ª –¥–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ —Ñ–∞–π–ª `tasks.txt` –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.
- **–ö–∞–∫:**  
  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `file_put_contents` —Å —Ñ–ª–∞–≥–æ–º `FILE_APPEND` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏.
- **–ö–æ–¥:**
  ```php
  if (empty($errors)) {
      $taskData = [
          'id' => uniqid(),
          'title' => $filteredInput['title'],
          'due_date' => $filteredInput['due_date'],
          'priority' => $filteredInput['priority'],
          'description' => $filteredInput['description'],
          'tags' => $tags,
          'steps' => $steps,
      ];
      $storageFile = __DIR__ . '/../../storage/tasks.txt';
      file_put_contents($storageFile, json_encode($taskData) . PHP_EOL, FILE_APPEND);
      header('Location: /public/index.php');
      exit;
  }
  ```

#### –®–∞–≥ 3.3: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–ß—Ç–æ —è —Å–¥–µ–ª–∞–ª:**  
  –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –æ—à–∏–±–æ–∫ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —Ñ–æ—Ä–º—É —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –æ—à–∏–±–æ–∫.
- **–ö–∞–∫:**  
  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª GET-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –æ—à–∏–±–æ–∫ –∏ —Å—Ç–∞—Ä—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
- **–ö–æ–¥:**
  ```php
  $errorsEncoded = urlencode(json_encode($errors));
  $oldEncoded = urlencode(json_encode($filteredInput));
  header("Location: /public/task/create.php?errors={$errorsEncoded}&old={$oldEncoded}");
  exit;
  ```

---

### –ó–∞–¥–∞–Ω–∏–µ 4: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–¥–∞—á

#### –®–∞–≥ 4.1: –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (2 –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–¥–∞—á–∏)
- **–ß—Ç–æ —è —Å–¥–µ–ª–∞–ª:**  
  –í —Ñ–∞–π–ª–µ `public/index.php` –æ—Ç–æ–±—Ä–∞–∑–∏–ª –¥–≤–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏–∑ —Ñ–∞–π–ª–∞ `tasks.txt`.
- **–ö–∞–∫:**  
  –°—á–∏—Ç–∞–ª —Å—Ç—Ä–æ–∫–∏ —Ñ–∞–π–ª–∞, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–ª –∏—Ö –≤ –º–∞—Å—Å–∏–≤ –∏ –≤—ã–±—Ä–∞–ª –ø–æ—Å–ª–µ–¥–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –ø–æ–º–æ—â—å—é `array_slice`.
- **–ö–æ–¥:**
  ```php
  $storageFile = __DIR__ . '/../storage/tasks.txt';
  $tasks = file_exists($storageFile) ? array_map('json_decode', file($storageFile, FILE_IGNORE_NEW_LINES)) : [];
  $latestTasks = array_slice($tasks, -2);
  foreach ($latestTasks as $task) {
      echo "<h3>{$task->title}</h3>";
      echo "<p>–î–µ–¥–ª–∞–π–Ω: {$task->due_date}</p>";
  }
  ```

#### –®–∞–≥ 4.2: –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ –≤—Å–µ–º–∏ –∑–∞–¥–∞—á–∞–º–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- **–ß—Ç–æ —è —Å–¥–µ–ª–∞–ª:**  
  –í —Ñ–∞–π–ª–µ `public/task/index.php` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª –≤—ã–≤–æ–¥ –≤—Å–µ—Ö –∑–∞–¥–∞—á —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.
- **–ö–∞–∫:**  
  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª GET-–ø–∞—Ä–∞–º–µ—Ç—Ä `page` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ `array_slice` –¥–ª—è –≤—ã–±–æ—Ä–∫–∏ –∑–∞–¥–∞—á.
- **–ö–æ–¥:**
  ```php
  $tasksPerPage = 5;
  $page = isset($_GET['page']) ? (int)$_GET['page'] : 1;
  $offset = ($page - 1) * $tasksPerPage;
  $tasks = array_map('json_decode', file($storageFile, FILE_IGNORE_NEW_LINES));
  $currentTasks = array_slice($tasks, $offset, $tasksPerPage);
  foreach ($currentTasks as $task) {
      echo "<h3>{$task->title}</h3>";
      echo "<p>–î–µ–¥–ª–∞–π–Ω: {$task->due_date}</p>";
  }
  $totalPages = ceil(count($tasks) / $tasksPerPage);
  for ($i = 1; $i <= $totalPages; $i++) {
      echo "<a href='index.php?page={$i}'>{$i}</a> ";
  }
  ```

---

## –ò—Å—Ö–æ–¥–Ω—ã–µ –∫–æ–¥—ã

### –§–∞–π–ª: `public/task/create.php`
```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</title>
    <style>
        .container { max-width: 600px; margin: 20px auto; }
        label { display: block; margin: 10px 0 5px; }
        input, select, textarea { width: 100%; padding: 8px; }
        .error { color: red; font-size: 0.9em; }
    </style>
    <script>
        function addStep() {
            const container = document.getElementById('steps-container');
            const newInput = document.createElement('input');
            newInput.type = 'text';
            newInput.name = 'steps[]';
            newInput.placeholder = '–í–≤–µ–¥–∏—Ç–µ —à–∞–≥';
            container.appendChild(newInput);
        }
    </script>
</head>
<body>
<div class="container">
    <h1>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏</h1>
    <?php
    $errors = isset($_GET['errors']) ? json_decode(urldecode($_GET['errors']), true) : [];
    $old = isset($_GET['old']) ? json_decode(urldecode($_GET['old']), true) : [];
    ?>
    <form action="../../src/handlers/create_task_handler.php" method="POST">
        <label for="title">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:</label>
        <input type="text" id="title" name="title" value="<?php echo $old['title'] ?? ''; ?>" required>
        <?php if (isset($errors['title'])) echo "<p class='error'>{$errors['title']}</p>"; ?>

        <label for="due_date">–î–µ–¥–ª–∞–π–Ω:</label>
        <input type="date" id="due_date" name="due_date" value="<?php echo $old['due_date'] ?? ''; ?>" required>
        <?php if (isset($errors['due_date'])) echo "<p class='error'>{$errors['due_date']}</p>"; ?>

        <label for="priority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</label>
        <select id="priority" name="priority" required>
            <option value="low">–ù–∏–∑–∫–∏–π</option>
            <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
            <option value="high">–í—ã—Å–æ–∫–∏–π</option>
        </select>

        <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
        <textarea id="description" name="description" rows="4"><?php echo $old['description'] ?? ''; ?></textarea>

        <label for="tags">–¢—ç–≥–∏:</label>
        <select id="tags" name="tags[]" multiple>
            <option value="work">–†–∞–±–æ—Ç–∞</option>
            <option value="personal">–õ–∏—á–Ω–æ–µ</option>
            <option value="urgent">–°—Ä–æ—á–Ω–æ</option>
        </select>

        <label>–®–∞–≥–∏:</label>
        <div id="steps-container"></div>
        <button type="button" onclick="addStep()">–î–æ–±–∞–≤–∏—Ç—å —à–∞–≥</button>

        <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </form>
</div>
</body>
</html>
```

### –§–∞–π–ª: `src/handlers/create_task_handler.php`
```php
<?php
require_once __DIR__ . '/../helpers.php';

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $filters = [
        'title' => FILTER_SANITIZE_STRING,
        'due_date' => FILTER_SANITIZE_STRING,
        'priority' => FILTER_SANITIZE_STRING,
        'description' => FILTER_SANITIZE_STRING,
    ];
    $filteredInput = filter_input_array(INPUT_POST, $filters);
    $tags = isset($_POST['tags']) ? (array)$_POST['tags'] : [];
    $steps = isset($_POST['steps']) ? (array)$_POST['steps'] : [];
    $errors = [];

    if (empty($filteredInput['title'])) {
        $errors['title'] = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏.';
    }
    if (empty($filteredInput['due_date'])) {
        $errors['due_date'] = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –¥–µ–¥–ª–∞–π–Ω.';
    }

    if (!empty($errors)) {
        $oldValues = $filteredInput;
        $errorsEncoded = urlencode(json_encode($errors));
        $oldEncoded = urlencode(json_encode($oldValues));
        header("Location: /public/task/create.php?errors={$errorsEncoded}&old={$oldEncoded}");
        exit;
    }

    $taskData = [
        'id' => uniqid(),
        'title' => $filteredInput['title'],
        'due_date' => $filteredInput['due_date'],
        'priority' => $filteredInput['priority'],
        'description' => $filteredInput['description'],
        'tags' => $tags,
        'steps' => $steps,
    ];
    $storageFile = __DIR__ . '/../../storage/tasks.txt';
    file_put_contents($storageFile, json_encode($taskData) . PHP_EOL, FILE_APPEND);
    header('Location: /public/index.php');
    exit;
}
```

---

## –°–∫—Ä–∏–Ω—à–æ—Ç—ã

1. **–§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏**  
   ![–§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏](images/create_task.png)  
   *–û–ø–∏—Å–∞–Ω–∏–µ: –§–æ—Ä–º–∞ —Å –ø–æ–ª—è–º–∏ –¥–ª—è –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á–∏ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —à–∞–≥–æ–≤.*

2. **–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–¥–∞—á —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π**  
   ![–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á](images/task_list.png)  
   *–û–ø–∏—Å–∞–Ω–∏–µ: –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ –≤—Å–µ–º–∏ –∑–∞–¥–∞—á–∞–º–∏ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º.*

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í —Ö–æ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã ‚Ññ4 —è:

- **–û—Å–≤–æ–∏–ª —Ä–∞–±–æ—Ç—É —Å HTML-—Ñ–æ—Ä–º–∞–º–∏ –≤ PHP**, –Ω–∞—É—á–∏–≤—à–∏—Å—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏—Ö.
- **–†–µ–∞–ª–∏–∑–æ–≤–∞–ª —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö**, –æ–±–µ—Å–ø–µ—á–∏–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤–≤–æ–¥–∞.
- **–°–æ–∑–¥–∞–ª —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ (ToDo-–ª–∏—Å—Ç)** —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Ñ–æ—Ä–º–æ–π, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.
- **–ó–∞–∫—Ä–µ–ø–∏–ª –Ω–∞–≤—ã–∫–∏ —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π**, –∏—Å–ø–æ–ª—å–∑—É—è JSON –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
- **–£–ª—É—á—à–∏–ª –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞**, –ø—Ä–∏–º–µ–Ω–∏–≤ –ª–æ–≥–∏—á–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.

–≠—Ç–∞ —Ä–∞–±–æ—Ç–∞ –∑–∞–ª–æ–∂–∏–ª–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∏–∑—É—á–µ–Ω–∏—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∏ —è –ø–ª–∞–Ω–∏—Ä—É—é —Ä–∞–∑–≤–∏–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–¥–∞–Ω–∏—è—Ö.

---

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### 1. –ö–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã HTTP –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã?
- **GET**: –ü–µ—Ä–µ–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ URL. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤, –Ω–µ –∏–∑–º–µ–Ω—è—é—â–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–∏—Å–∫).
- **POST**: –ü–µ—Ä–µ–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏).

### 2. –ß—Ç–æ —Ç–∞–∫–æ–µ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, –∏ —á–µ–º –æ–Ω–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏?
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã).
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏–ª–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏—Ö –≤ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–∏–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É–¥–∞–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ —Å –ø–æ–º–æ—â—å—é `strip_tags`).
- **–†–∞–∑–Ω–∏—Ü–∞**: –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –ø—Ä–∞–≤–∏–ª—å–Ω—ã –ª–∏ –¥–∞–Ω–Ω—ã–µ, –∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –∏—Ö –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ.

### 3. –ö–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ PHP –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö?
- `filter_input` –∏ `filter_var` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
- `filter_input_array` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–∞ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `$_POST`).
- `strip_tags` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ HTML-—Ç–µ–≥–æ–≤.
- `htmlspecialchars` ‚Äî —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤.
- `trim` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –Ω–∞—á–∞–ª–µ –∏ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫–∏.
